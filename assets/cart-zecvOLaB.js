import{a as k,b as v,j as e,C as S,A as P,g as W}from"./index-C5Uq8mPh.js";import{u as B}from"./page-translate-D5d49dds.js";import{u as $}from"./use-product-catalog-v6q4Vyoj.js";import{P as L,C as I,e as F,T as w}from"./tool-page-layout-BJTCHdxN.js";import{B as D}from"./breadcrumbs-DTCUp4tb.js";import{F as H}from"./face-icon-B-27NXPB.js";import{Q as T}from"./quantity-selector-DRMaDV_D.js";import{u as C,r as g}from"./ui-CvrfViwR.js";import{u as q}from"./current-category-v2fyAVOi.js";import"./vendor-DJG_os-6.js";const Q="_summary_1eq98_1",A="_headerWrap_1eq98_6",E="_items_1eq98_32",O="_item_1eq98_32",R="_total_1eq98_41",z="_form_1eq98_51",U="_input_1eq98_56",o={summary:Q,headerWrap:A,items:E,item:O,total:R,form:z,input:U},X=({products:r,total:d})=>{const{t:c,i18n:u}=C("common"),y=k(),{cartItems:_}=v(),n=u.language,[h,p]=g.useState(""),[m,x]=g.useState(""),[a,i]=g.useState(""),N=q(),f=r.map(s=>{var l;return`${s.title[n]}, ${((l=s.description)==null?void 0:l[n])||s.shortName[n]} — ${s.quantity} шт. = ${(s.price*s.quantity).toLocaleString()} ₸`}).join(`
`),b=s=>{s.preventDefault();const l={user_name:h,user_phone:m,order_details:f,user_city:a,total_price:`${d.toLocaleString()} ₸`};F.send("service_86eog8m","template_45a1bjo",l,"ants2gildzCOiXvR5").then(()=>{p(""),x(""),i("")}).catch(j=>{console.error("Ошибка отправки:",j)}),y("/cart/booked")};return e.jsxs("div",{className:o.summary,children:[e.jsxs("div",{className:o.headerWrap,children:[e.jsx("h4",{children:c("order-summary.header")}),e.jsxs("span",{children:[" ",`${_.length} ${c("order-summary.quantity",{count:_.length})}`]})]}),e.jsx("div",{className:o.items,children:r.map(s=>{var l,j;return e.jsxs("div",{className:o.item,children:[e.jsxs("div",{children:[e.jsx("div",{children:s.title[n]}),N==="doors"&&e.jsx("div",{children:(l=s.description)==null?void 0:l[n]}),N==="furniture"&&e.jsx("div",{children:(j=s.shortName)==null?void 0:j[n]})]}),e.jsxs("div",{children:[(s.price*s.quantity).toLocaleString()," ₸"]})]},s.id)})}),e.jsxs("div",{className:o.total,children:[e.jsx("span",{children:c("order-summary.sum")}),e.jsxs("span",{children:[d.toLocaleString()," ₸"]})]}),e.jsxs("form",{id:"form",className:o.form,onSubmit:b,children:[e.jsx("input",{name:"username",className:o.input,type:"text",placeholder:c("modal-order.name.placeholder"),value:h,onChange:s=>p(s.target.value),required:!0}),e.jsx(L,{value:m,onChange:x}),e.jsx("input",{name:"city",className:o.input,type:"text",placeholder:c("modal-order.city.placeholder"),value:a,onChange:s=>i(s.target.value),required:!0}),e.jsx(I,{label:c("modal-order.button.label"),type:"submit"})]})]})},G="_cartContainer_12kae_1",J="_titleContainer_12kae_16",K="_contentWrapper_12kae_37",M="_mainHeader_12kae_45",V="_label_12kae_63",Y="_cartContent_12kae_75",Z="_cartPage_12kae_86",ee="_table_12kae_102",ae="_header_12kae_111",te="_row_12kae_126",se="_deleteButton_12kae_145",re="_imageName_12kae_166",ne="_imageWrapper_12kae_178",ie="_productName_12kae_191",ce="_title_12kae_16",oe="_price_12kae_219",le="_priceSum_12kae_219",me="_quantity_12kae_219",de="_summary_12kae_263",ue="_faceContainer_12kae_271",_e="_text_12kae_290",t={cartContainer:G,titleContainer:J,contentWrapper:K,mainHeader:M,label:V,cartContent:Y,cartPage:Z,table:ee,header:ae,row:te,deleteButton:se,imageName:re,imageWrapper:ne,productName:ie,title:ce,price:oe,priceSum:le,quantity:me,summary:de,faceContainer:ue,text:_e},fe=()=>{const{t:r}=B(),{cartItems:d,removeFromCart:c,updateQuantity:u}=v(),{i18n:y}=C("common"),{getProductDetailsById:_}=$(),n=y.language,h=q(),p=d.length===0,m=d.map(a=>{const i=_(a.id);return i?{...i.product,quantity:a.quantity}:null}).filter(a=>a!==null),x=m.reduce((a,i)=>a+i.price*i.quantity,0);return e.jsx(w,{isFullFooter:!1,children:e.jsxs("div",{className:t.cartContainer,children:[e.jsx("div",{className:t.titleContainer,children:e.jsxs("div",{className:t.contentWrapper,children:[e.jsx("h1",{className:t.mainHeader,children:r("main-header")}),e.jsx("div",{className:t.label,children:r("main-header.label")})]})}),e.jsxs("div",{className:t.cartContent,children:[e.jsx(D,{current:r("main-header")}),p?e.jsxs("div",{className:t.faceContainer,children:[e.jsx(H,{}),e.jsxs("h2",{className:t.title,children:["  ",r("empty-header").toUpperCase()," "]}),e.jsxs("div",{className:t.text,children:["   ",r("empty-label")]})]}):e.jsxs("div",{className:t.cartPage,children:[e.jsxs("div",{className:t.table,children:[e.jsxs("div",{className:t.header,children:[e.jsx("span",{children:r("cart.product")}),e.jsx("span",{children:r("cart.price")}),e.jsx("span",{children:r("cart.quantity")}),e.jsx("span",{children:r("cart.total")})]}),m.map(a=>{var i;return e.jsxs("div",{className:t.row,children:[e.jsx("div",{className:t.deleteButton,children:e.jsx(S,{bgColor:P.text.light,ariaLabel:r("delete-button"),onClick:()=>c(a.id),icon:e.jsx(W,{})})}),e.jsxs("div",{className:t.imageName,children:[e.jsx("div",{className:t.imageWrapper,children:e.jsx("img",{src:a.images[0],alt:a.title[n]})}),e.jsxs("div",{className:t.productName,children:[e.jsx("div",{className:t.title,children:a.title[n]}),h==="doors"&&e.jsx("div",{className:t.title,children:a.description[n]}),e.jsx("div",{className:t.shortName,children:(i=a.shortName)==null?void 0:i[n]})]})]}),e.jsxs("div",{className:t.price,children:[e.jsx("span",{children:r("cart.price")}),a.price.toLocaleString()," ₸"]}),e.jsxs("div",{className:t.quantity,children:[e.jsx("span",{children:r("cart.quantity")}),e.jsx(T,{quantity:a.quantity,onIncrease:()=>u(a.id,a.quantity+1),onDecrease:()=>u(a.id,a.quantity-1)})]}),e.jsxs("div",{className:t.priceSum,children:[e.jsx("span",{children:r("cart.total")}),(a.price*a.quantity).toLocaleString()," ₸"]})]},a.id)})]}),e.jsx("div",{className:t.summary,children:e.jsx(X,{products:m,total:x})})]})]})]})})};export{fe as default};
